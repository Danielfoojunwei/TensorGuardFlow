<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TensorGuard Control Center</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="brand">
                <div class="logo-icon">üõ°Ô∏è</div>
                <h1>TensorGuard</h1>
                <div id="simd-badge" class="simd-badge hidden">SIMD Optimized</div>
            </div>
            <div class="status-badge" id="connection-status">
                <span class="dot"></span> <span id="conn-text">Connecting...</span>
            </div>
        </header>

        <!-- Main Card -->
        <main>
            <div class="card">
                <h2>Privacy-Preserving Fine-Tuning</h2>
                <p class="subtitle">Robot Fleet: <strong>Manufacturing Zone A</strong> (5 Units)</p>

                <!-- Encryption Visualization -->
                <div class="encryption-viz">
                    <div class="secure-line">
                        <div class="icon robot">ü§ñ</div>
                        <div class="pipeline">
                            <div class="stage" title="Gradient Clipping">‚úÇÔ∏è</div>
                            <div class="arrow">‚Üí</div>
                            <div class="stage" title="Sparsification">üìâ</div>
                            <div class="arrow">‚Üí</div>
                            <div class="stage" title="APHE Compression">üì¶</div>
                            <div class="arrow">‚Üí</div>
                            <div class="stage lock" title="N2HE Encryption">üîí</div>
                        </div>
                        <div class="icon cloud">‚òÅÔ∏è</div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="label">Encrypted Submissions</span>
                        <span class="value" id="submission-count">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Bandwidth Saved</span>
                        <span class="value highlight" id="saved-mb">15.2 MB</span>
                    </div>
                </div>

                <!-- Telemetry Section -->
                <div class="telemetry-section">
                    <div class="telemetry-grid">
                        <div class="telemetry-card">
                            <span class="tel-label">Train Latency</span>
                            <span class="tel-value" id="lat-train">0ms</span>
                        </div>
                        <div class="telemetry-card">
                            <span class="tel-label">Compress</span>
                            <span class="tel-value" id="lat-compress">0ms</span>
                        </div>
                        <div class="telemetry-card">
                            <span class="tel-label">Encrypt</span>
                            <span class="tel-value" id="lat-encrypt">0ms</span>
                        </div>
                    </div>
                    <div class="quality-info">
                        <span>Compression Ratio: <strong id="comp-ratio">32:1</strong></span>
                        <span>MSE Quality: <strong id="mse-val">0.0000</strong></span>
                    </div>
                </div>

                <!-- MoI Experts Section -->
                <div class="experts-section">
                    <h3>Mixture of Intelligence Experts</h3>
                    <div class="experts-grid">
                        <div class="expert-item" id="expert-visual">
                            <span class="icon">üëÅÔ∏è</span>
                            <span class="name">Visual</span>
                            <span class="weight" id="weight-visual">1.0x</span>
                        </div>
                        <div class="expert-item" id="expert-language">
                            <span class="icon">üìù</span>
                            <span class="name">Language</span>
                            <span class="weight" id="weight-language">0.8x</span>
                        </div>
                        <div class="expert-item" id="expert-aux">
                            <span class="icon">üîß</span>
                            <span class="name">Auxiliary</span>
                            <span class="weight" id="weight-aux">1.2x</span>
                        </div>
                    </div>
                </div>

                <!-- Privacy Budget -->
                <div class="budget-section">
                    <div class="budget-header">
                        <span class="label">Privacy Budget (Œµ)</span>
                        <span class="value" id="budget-val">5.00</span>
                    </div>
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fill" id="budget-fill"></div>
                    </div>
                    <p class="crypto-note">Protected by N2HE Homomorphic Encryption</p>
                </div>

                <!-- Key Management Section -->
                <div class="key-section">
                    <h3>Enterprise Key Management</h3>
                    <div class="key-status-card">
                        <div class="key-info">
                            <span class="key-label">Active Key:</span>
                            <span id="key-path" class="key-path">keys/node_key.pem</span>
                        </div>
                        <div id="key-badge" class="badge">Checking...</div>
                    </div>
                    <button id="btn-gen-key" class="btn tertiary">Generate New Enterprise Key</button>
                    <p id="gen-status" class="status-msg"></p>
                </div>

                <!-- Controls -->
                <div class="controls">
                    <button id="btn-start" class="btn primary">Start Training</button>
                    <button id="btn-stop" class="btn secondary" disabled>Stop</button>
                </div>
                <!-- Audit Log Section -->
                <div class="audit-section">
                    <h3>Security Audit Log</h3>
                    <div id="audit-log" class="audit-log">
                        <div class="audit-entry empty">No security events recorded.</div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>Powered by <strong>APHE</strong> & <strong>N2HE</strong></p>
        </footer>
    </div>
    <script src="app.js"></script>
</body>

</html>